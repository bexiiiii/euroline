# Исправление длинных таблиц на странице Финансов

## Проблема
На странице `/finances` в клиентской части приложения таблицы "История пополнений" и "История транзакций" были слишком длинными, загружая много записей (20 и 50 соответственно) и занимая много места на странице.

## Решение

### 1. Ограничение загружаемых данных
Уменьшено количество записей, загружаемых с сервера:
- **История пополнений**: с 20 до **10 записей**
- **История транзакций**: с 50 до **15 записей**

```typescript
const [b, t, x] = await Promise.all([
  getMyBalance(),
  getMyTopUps(0, 10),      // было: 20
  getMyTransactions(0, 15), // было: 50
])
```

### 2. Добавлена вертикальная прокрутка
Для обеих таблиц добавлена максимальная высота с возможностью прокрутки:
- **Максимальная высота**: 400px
- **Overflow**: auto (прокрутка появляется при необходимости)

```tsx
<div className="overflow-x-auto max-h-[400px] overflow-y-auto">
```

### 3. Зафиксированный заголовок таблицы
Заголовки таблиц остаются видимыми при прокрутке:

```tsx
<TableHeader className="sticky top-0 bg-white z-10">
```

### 4. Информационное сообщение
Добавлено сообщение о количестве отображаемых записей:

```tsx
{topUps && topUps.totalElements > topUps.content.length && (
  <div className="text-xs text-muted-foreground text-center pt-2 border-t mt-2">
    Показано последние {topUps.content.length} записей из {topUps.totalElements}
  </div>
)}
```

## Результат

### До изменений:
- ❌ Таблица пополнений: 20 записей без прокрутки
- ❌ Таблица транзакций: 50 записей без прокрутки
- ❌ Страница очень длинная, нужно много скроллить
- ❌ Низкая производительность при загрузке

### После изменений:
- ✅ Таблица пополнений: 10 записей с прокруткой
- ✅ Таблица транзакций: 15 записей с прокруткой
- ✅ Компактное отображение с фиксированной высотой
- ✅ Заголовки видны при прокрутке
- ✅ Информация о полном количестве записей
- ✅ Быстрая загрузка страницы

## Визуальные улучшения

### История пополнений
```
┌─────────────────────────────────────┐
│ История пополнений            [↕️]  │
├─────────────────────────────────────┤
│ Дата         | Сумма    | Статус   │ ← sticky header
├─────────────────────────────────────┤
│ 01.10.2025   | 50,000₸  | APPROVED │
│ 28.09.2025   | 30,000₸  | PENDING  │
│ ...          | ...      | ...      │ ← max 10 записей
│              | scroll   |          │ ← до 400px высоты
└─────────────────────────────────────┘
  Показано последние 10 из 45 записей
```

### История транзакций
```
┌──────────────────────────────────────────────┐
│ История транзакций                     [↕️]  │
├──────────────────────────────────────────────┤
│ Дата    | Тип  | Описание     | Сумма      │ ← sticky header
├──────────────────────────────────────────────┤
│ 01.10   | TOPUP| TopUp 123    | +50,000₸   │
│ 30.09   | CHARGE| Order 456   | -12,500₸   │
│ ...     | ...  | ...          | ...        │ ← max 15 записей
│         |      | scroll       |            │ ← до 400px высоты
└──────────────────────────────────────────────┘
  Показано последние 15 из 87 записей
```

## Технические детали

### Файл: `/autoparts/app/(routes)/finances/page.tsx`

#### Изменения в функции `loadAll()`:
```diff
- getMyTopUps(0, 20),
+ getMyTopUps(0, 10),

- getMyTransactions(0, 50),
+ getMyTransactions(0, 15),
```

#### Изменения в разметке таблиц:
```diff
- <div className="overflow-x-auto">
+ <div className="overflow-x-auto max-h-[400px] overflow-y-auto">

- <TableHeader>
+ <TableHeader className="sticky top-0 bg-white z-10">
```

## Преимущества

1. **Производительность**: 
   - Меньше данных загружается с сервера
   - Быстрее рендеринг страницы
   - Меньше нагрузка на клиент

2. **UX (User Experience)**:
   - Компактный интерфейс
   - Не нужно долго скроллить страницу
   - Видны заголовки при прокрутке таблицы
   - Понятно сколько всего записей

3. **Адаптивность**:
   - Фиксированная высота работает на всех устройствах
   - Горизонтальная прокрутка для маленьких экранов
   - Вертикальная прокрутка для больших данных

## Дополнительные возможности (будущие улучшения)

1. **Пагинация**: Добавить кнопки "Загрузить еще" или "Показать все"
2. **Фильтры**: Фильтрация по дате, статусу, типу
3. **Поиск**: Поиск по описанию транзакций
4. **Сортировка**: Сортировка по колонкам
5. **Экспорт**: Выгрузка всех данных в CSV/Excel

## Тестирование

Для проверки изменений:
1. Откройте страницу `/finances`
2. Проверьте что таблицы имеют ограниченную высоту
3. Попробуйте прокрутить таблицу вниз
4. Убедитесь что заголовки остаются видимыми
5. Проверьте информационное сообщение внизу таблиц

## Обратная совместимость

✅ Изменения полностью обратно совместимы
✅ API не изменялся
✅ Существующие данные работают без изменений
✅ Стили не конфликтуют с другими компонентами
